{% block content %}
<div class="d-flex justify-content-between mb-4">
  <h1>Список чеков</h1>
  <div class="btn-group">
    {% if user.is_authenticated %}
      <form action="{% url 'logout' %}" method="post" style="display: inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">Выйти</button>
      </form>
      <span class="btn btn-secondary disabled">
        Вы вошли как: {{ user.username }} ({{ user.get_role_display }})
      </span>
    {% else %}
      <a href="{% url 'login' %}" class="btn btn-primary">Войти</a>
      <a href="{% url 'register' %}" class="btn btn-success">Регистрация</a>
    {% endif %}
  </div>
</div>

<table>
    <thead>
        <tr>
            <th>Номер</th>
            <th>Дата и время</th>
            <th>Сумма</th>
            <th>Магазин</th>
            <th>Клиент</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for receipt in receipts %}
        <tr>
            <td>{{ receipt.number }}</td>
            <td>{{ receipt.date_time }}</td>
            <td>{{ receipt.total_amount }}</td>
            <td>{{ receipt.store.name }}</td>
            <td>{{ receipt.customer.name }}</td>
            <td>
                <a href="{% url 'receipt_detail' pk=receipt.pk %}" class="button">Просмотр</a>
                {% if user.role == 'manager' or receipt.cashier == user %}
                    <a href="{% url 'receipt_update' pk=receipt.pk %}" class="button">Редактировать</a>
                    <a href="{% url 'receipt_delete' pk=receipt.pk %}" class="button">Удалить</a>
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6">Чеков пока нет.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<a href="{% url 'receipt_create' %}" class="button">Добавить новый чек</a>
{% endblock %}